(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},90571,e=>{"use strict";var t=function(){return(t=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};function r(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)0>t.indexOf(a[s])&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]]);return r}function a(e,t,r,a){return new(r||(r=Promise))(function(s,l){function i(e){try{o(a.next(e))}catch(e){l(e)}}function n(e){try{o(a.throw(e))}catch(e){l(e)}}function o(e){var t;e.done?s(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(i,n)}o((a=a.apply(e,t||[])).next())})}function s(e,t,r){if(r||2==arguments.length)for(var a,s=0,l=t.length;s<l;s++)!a&&s in t||(a||(a=Array.prototype.slice.call(t,0,s)),a[s]=t[s]);return e.concat(a||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError,e.s(["__assign",()=>t,"__awaiter",()=>a,"__rest",()=>r,"__spreadArray",()=>s])},18566,(e,t,r)=>{t.exports=e.r(76562)},75254,e=>{"use strict";var t=e.i(71645);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},a=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,t.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:n="",children:o,iconNode:c,...d},u)=>(0,t.createElement)("svg",{ref:u,...s,width:r,height:r,stroke:e,strokeWidth:i?24*Number(l)/Number(r):l,className:a("lucide",n),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(d)&&{"aria-hidden":"true"},...d},[...c.map(([e,r])=>(0,t.createElement)(e,r)),...Array.isArray(o)?o:[o]])),i=(e,s)=>{let i=(0,t.forwardRef)(({className:i,...n},o)=>(0,t.createElement)(l,{ref:o,iconNode:s,className:a(`lucide-${r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,i),...n}));return i.displayName=r(e),i};e.s(["default",()=>i],75254)},37727,e=>{"use strict";let t=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],37727)},63209,e=>{"use strict";let t=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},67585,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"BailoutToCSR",{enumerable:!0,get:function(){return s}});let a=e.r(32061);function s({reason:e,children:t}){if("u"<typeof window)throw Object.defineProperty(new a.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t}},9885,(e,t,r)=>{"use strict";function a(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"encodeURIPath",{enumerable:!0,get:function(){return a}})},52157,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"PreloadChunks",{enumerable:!0,get:function(){return o}});let a=e.r(43476),s=e.r(74080),l=e.r(63599),i=e.r(9885),n=e.r(43369);function o({moduleIds:e}){if("u">typeof window)return null;let t=l.workAsyncStorage.getStore();if(void 0===t)return null;let r=[];if(t.reactLoadableManifest&&e){let a=t.reactLoadableManifest;for(let t of e){if(!a[t])continue;let e=a[t].files;r.push(...e)}}if(0===r.length)return null;let o=(0,n.getDeploymentIdQueryOrEmptyString)();return(0,a.jsx)(a.Fragment,{children:r.map(e=>{let r=`${t.assetPrefix}/_next/${(0,i.encodeURIPath)(e)}${o}`;return e.endsWith(".css")?(0,a.jsx)("link",{precedence:"dynamic",href:r,rel:"stylesheet",as:"style",nonce:t.nonce},e):((0,s.preload)(r,{as:"script",fetchPriority:"low",nonce:t.nonce}),null)})})}},69093,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return c}});let a=e.r(43476),s=e.r(71645),l=e.r(67585),i=e.r(52157);function n(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(n(()=>null)),loading:null,ssr:!0},c=function(e){let t={...o,...e},r=(0,s.lazy)(()=>t.loader().then(n)),c=t.loading;function d(e){let n=c?(0,a.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,o=!t.ssr||!!t.loading,d=o?s.Suspense:s.Fragment,u=t.ssr?(0,a.jsxs)(a.Fragment,{children:["u"<typeof window?(0,a.jsx)(i.PreloadChunks,{moduleIds:t.modules}):null,(0,a.jsx)(r,{...e})]}):(0,a.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(r,{...e})});return(0,a.jsx)(d,{...o?{fallback:n}:{},children:u})}return d.displayName="LoadableComponent",d}},70703,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return s}});let a=e.r(55682)._(e.r(69093));function s(e,t){let r={};"function"==typeof e&&(r.loader=e);let s={...r,...t};return(0,a.default)({...s,modules:s.loadableGenerated?.modules})}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},27627,e=>{"use strict";var t=e.i(43476),r=e.i(70703),a=e.i(71645),s=e.i(18566),l=e.i(20755),i=e.i(37727),n=e.i(31278),o=e.i(27927),c=e.i(63209);let d=[{value:"tactic",label:"Tactic",description:"Set plays and tactical movements"},{value:"skill",label:"Skill",description:"Technical drills and exercises"},{value:"game",label:"Game",description:"Match situations and scenarios"},{value:"other",label:"Other",description:"Other animation types"}],u=[{value:"private",label:"Private",description:"Only you can see this animation"},{value:"link_shared",label:"Link Only",description:"Anyone with the link can view"},{value:"public",label:"Public",description:"Visible in the public gallery"}];function m({projectName:e,payload:r,onClose:s,onSuccess:l}){let[m,p]=(0,a.useState)(e||"Untitled Animation"),[x,f]=(0,a.useState)(""),[b,h]=(0,a.useState)("tactic"),[y,v]=(0,a.useState)("private"),[j,g]=(0,a.useState)(""),[N,w]=(0,a.useState)(!1),[k,C]=(0,a.useState)(null),O=async e=>{if(e.preventDefault(),!m.trim())return void C("Title is required");w(!0),C(null);try{let e=j.split(",").map(e=>e.trim()).filter(e=>e.length>0).slice(0,10),t=await fetch("/api/animations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:m.trim(),description:x.trim()||void 0,animation_type:b,visibility:y,tags:e.length>0?e:void 0,payload:r})});if(!t.ok){let e=await t.json();throw Error(e.error?.message||"Failed to save animation")}let a=await t.json();l(a.id)}catch(e){C(e instanceof Error?e.message:"An error occurred")}finally{w(!1)}};return(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:s}),(0,t.jsxs)("div",{className:"relative w-full max-w-lg bg-surface border border-border mx-4 max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-border sticky top-0 bg-surface",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(o.Cloud,{className:"w-5 h-5 text-primary"}),(0,t.jsx)("h2",{className:"text-lg font-heading font-semibold text-text-primary",children:"Save to Cloud"})]}),(0,t.jsx)("button",{onClick:s,className:"p-1 hover:bg-surface-warm transition-colors","aria-label":"Close modal",children:(0,t.jsx)(i.X,{className:"w-5 h-5"})})]}),(0,t.jsxs)("form",{onSubmit:O,className:"p-4",children:[k&&(0,t.jsxs)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 text-sm flex items-start gap-2",children:[(0,t.jsx)(c.AlertCircle,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),(0,t.jsx)("span",{children:k})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("label",{htmlFor:"save-title",className:"block text-sm font-medium text-text-primary mb-1",children:["Title ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",id:"save-title",value:m,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-border bg-surface focus:border-primary focus:outline-none",maxLength:100,placeholder:"Enter a title for your animation",required:!0}),(0,t.jsxs)("p",{className:"text-xs text-text-primary/50 mt-1",children:[m.length,"/100 characters"]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"save-description",className:"block text-sm font-medium text-text-primary mb-1",children:"Description"}),(0,t.jsx)("textarea",{id:"save-description",value:x,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border border-border bg-surface focus:border-primary focus:outline-none resize-none",rows:3,maxLength:2e3,placeholder:"Describe your animation (optional)"}),(0,t.jsxs)("p",{className:"text-xs text-text-primary/50 mt-1",children:[x.length,"/2000 characters"]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:["Animation Type ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2",children:d.map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>h(e.value),className:`p-3 text-left transition-colors border ${b===e.value?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:[(0,t.jsx)("div",{className:"font-medium text-sm text-text-primary",children:e.label}),(0,t.jsx)("div",{className:"text-xs text-text-primary/60",children:e.description})]},e.value))})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"save-tags",className:"block text-sm font-medium text-text-primary mb-1",children:"Tags"}),(0,t.jsx)("input",{type:"text",id:"save-tags",value:j,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-border bg-surface focus:border-primary focus:outline-none",placeholder:"lineout, scrum, backs (comma-separated)"}),(0,t.jsx)("p",{className:"text-xs text-text-primary/50 mt-1",children:"Up to 10 tags, separated by commas"})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Visibility"}),(0,t.jsx)("div",{className:"space-y-2",children:u.map(e=>(0,t.jsxs)("label",{className:`flex items-start p-3 cursor-pointer border transition-colors ${y===e.value?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:[(0,t.jsx)("input",{type:"radio",name:"visibility",value:e.value,checked:y===e.value,onChange:()=>v(e.value),className:"mt-0.5 mr-3"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-text-primary",children:e.label}),(0,t.jsx)("div",{className:"text-xs text-text-primary/70",children:e.description})]})]},e.value))})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:s,className:"flex-1 px-4 py-2 border border-border text-text-primary font-medium hover:bg-surface-warm transition-colors",disabled:N,children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-primary text-text-inverse font-medium hover:bg-primary/90 transition-colors disabled:opacity-50",disabled:N,children:N?(0,t.jsxs)("span",{className:"inline-flex items-center justify-center gap-2",children:[(0,t.jsx)(n.Loader2,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):(0,t.jsxs)("span",{className:"inline-flex items-center justify-center gap-2",children:[(0,t.jsx)(o.Cloud,{className:"w-4 h-4"}),"Save to Cloud"]})})]})]})]})]})}var p=e.i(16742),x=e.i(46696);let f=(0,r.default)(()=>e.A(38879),{loadableGenerated:{modules:[59004]},ssr:!1,loading:()=>(0,t.jsx)("div",{className:"flex h-screen items-center justify-center bg-background",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-text-primary",children:"Loading editor..."})]})})});function b(){let e=(0,s.useRouter)(),[r,i]=(0,a.useState)(null),[n,o]=(0,a.useState)(!0),[c,d]=(0,a.useState)(!1),u=(0,p.useProjectStore)(e=>e.project);(0,a.useEffect)(()=>{let e=(0,l.createSupabaseBrowserClient)();e.auth.getUser().then(({data:{user:e}})=>{i(e),o(!1)});let{data:{subscription:t}}=e.auth.onAuthStateChange((e,t)=>{i(t?.user??null)});return()=>t.unsubscribe()},[]);let b=(0,a.useCallback)(()=>{r?d(!0):e.push("/login?redirect=/app")},[r,e]),h=(0,a.useCallback)(e=>{d(!1),x.toast.success("Animation saved to cloud!"),console.log("Saved animation ID:",e)},[]),y=(0,a.useCallback)(()=>u?{version:"1.0",name:u.name,sport:u.sport,frames:u.frames,settings:u.settings}:null,[u]);if(n)return(0,t.jsx)("div",{className:"flex h-screen items-center justify-center bg-background",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-text-primary",children:"Loading..."})]})});let v=y();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f,{isAuthenticated:!!r,onSaveToCloud:b}),c&&v&&(0,t.jsx)(m,{projectName:u?.name||"Untitled Animation",payload:v,onClose:()=>d(!1),onSuccess:h})]})}e.s(["default",()=>b],27627)},38879,e=>{e.v(t=>Promise.all(["static/chunks/18e1599b74c9a70b.js","static/chunks/d4a0854bece78e04.js"].map(t=>e.l(t))).then(()=>t(59004)))}]);