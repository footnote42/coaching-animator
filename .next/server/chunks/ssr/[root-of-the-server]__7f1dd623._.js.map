{"version":3,"sources":["../../../../app/gallery/%5Bid%5D/GalleryDetailClient.tsx/__nextjs-internal-proxy.mjs","../../../../app/gallery/%5Bid%5D/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const GalleryDetailClient = registerClientReference(\n    function() { throw new Error(\"Attempted to call GalleryDetailClient() from the server but GalleryDetailClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/gallery/[id]/GalleryDetailClient.tsx\",\n    \"GalleryDetailClient\",\n);\n","import { notFound } from 'next/navigation';\nimport { Metadata } from 'next';\nimport { createSupabaseServerClient } from '../../../lib/supabase/server';\nimport { GalleryDetailClient } from './GalleryDetailClient';\n\ninterface PageProps {\n  params: Promise<{ id: string }>;\n}\n\nexport async function generateMetadata({ params }: PageProps): Promise<Metadata> {\n  const { id } = await params;\n  const supabase = await createSupabaseServerClient();\n  \n  const { data: animation } = await supabase\n    .from('saved_animations')\n    .select('title, description, animation_type, tags')\n    .eq('id', id)\n    .is('hidden_at', null)\n    .eq('visibility', 'public')\n    .single();\n\n  if (!animation) {\n    return {\n      title: 'Animation Not Found',\n    };\n  }\n\n  const description = animation.description || `A ${animation.animation_type} animation for rugby coaching`;\n\n  return {\n    title: `${animation.title} | Coaching Animator Gallery`,\n    description,\n    keywords: ['rugby', 'animation', 'coaching', animation.animation_type, ...(animation.tags || [])],\n    openGraph: {\n      title: animation.title,\n      description,\n      type: 'website',\n      images: [`/api/og/${id}`],\n    },\n    twitter: {\n      card: 'summary_large_image',\n      title: animation.title,\n      description,\n      images: [`/api/og/${id}`],\n    },\n  };\n}\n\nexport default async function GalleryDetailPage({ params }: PageProps) {\n  const { id } = await params;\n  const supabase = await createSupabaseServerClient();\n\n  const { data: animation, error } = await supabase\n    .from('saved_animations')\n    .select(`\n      id,\n      title,\n      description,\n      coaching_notes,\n      animation_type,\n      tags,\n      payload,\n      duration_ms,\n      frame_count,\n      visibility,\n      upvote_count,\n      view_count,\n      created_at,\n      user_id,\n      user_profiles!saved_animations_user_id_fkey (\n        display_name\n      )\n    `)\n    .eq('id', id)\n    .is('hidden_at', null)\n    .eq('visibility', 'public')\n    .single();\n\n  if (error || !animation) {\n    notFound();\n  }\n\n  // Increment view count\n  await supabase\n    .from('saved_animations')\n    .update({ view_count: (animation.view_count || 0) + 1 })\n    .eq('id', id);\n\n  const authorName = (animation.user_profiles as unknown as { display_name: string | null } | null)?.display_name || 'Anonymous Coach';\n\n  return (\n    <GalleryDetailClient\n      animation={{\n        ...animation,\n        author: { display_name: authorName },\n      }}\n    />\n  );\n}\n"],"names":[],"mappings":"wWAEO,IAAM,EAAsB,CAAA,EAAA,AADnC,EAAA,CAAA,CAAA,OACmC,uBAAA,AAAuB,EACtD,WAAa,MAAM,AAAI,MAAM,oPAAsP,EACnR,yEACA,kFAHG,IAAM,EAAsB,CAAA,EAAA,AADnC,EAAA,CAAA,CAAA,OACmC,uBAAA,AAAuB,EACtD,WAAa,MAAM,AAAI,MAAM,oPAAsP,EACnR,qDACA,yHCLJ,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MAMO,eAAe,EAAiB,QAAE,CAAM,CAAa,EAC1D,GAAM,IAAE,CAAE,CAAE,CAAG,MAAM,EACf,EAAW,MAAM,CAAA,EAAA,EAAA,0BAAA,AAA0B,IAE3C,CAAE,KAAM,CAAS,CAAE,CAAG,MAAM,EAC/B,IAAI,CAAC,oBACL,MAAM,CAAC,4CACP,EAAE,CAAC,KAAM,GACT,EAAE,CAAC,YAAa,MAChB,EAAE,CAAC,aAAc,UACjB,MAAM,GAET,GAAI,CAAC,EACH,MAAO,CACL,EAFY,IAEL,qBACT,EAGF,IAAM,EAAc,EAAU,WAAW,EAAI,CAAC,EAAE,EAAE,EAAU,cAAc,CAAC,6BAA6B,CAAC,CAEzG,MAAO,CACL,MAAO,CAAA,EAAG,EAAU,KAAK,CAAC,4BAA4B,CAAC,aACvD,EACA,SAAU,CAAC,QAAS,YAAa,WAAY,EAAU,cAAc,IAAM,EAAU,IAAI,EAAI,EAAE,CAAE,CACjG,UAAW,CACT,MAAO,EAAU,KAAK,aACtB,EACA,KAAM,UACN,OAAQ,CAAC,CAAC,QAAQ,EAAE,EAAA,CAAI,CAAC,AAC3B,EACA,QAAS,CACP,KAAM,sBACN,MAAO,EAAU,KAAK,aACtB,EACA,OAAQ,CAAC,CAAC,QAAQ,EAAE,EAAA,CAAI,CAAC,AAC3B,CACF,CACF,CAEe,eAAe,EAAkB,QAAE,CAAM,CAAa,EACnE,GAAM,IAAE,CAAE,CAAE,CAAG,MAAM,EACf,EAAW,MAAM,CAAA,EAAA,EAAA,0BAA0B,AAA1B,IAEjB,CAAE,KAAM,CAAS,OAAE,CAAK,CAAE,CAAG,MAAM,EACtC,IAAI,CAAC,oBACL,MAAM,CAAC,CAAC;;;;;;;;;;;;;;;;;;IAkBT,CAAC,EACA,EAAE,CAAC,KAAM,GACT,EAAE,CAAC,YAAa,MAChB,EAAE,CAAC,aAAc,UACjB,MAAM,IAEL,GAAS,CAAC,CAAA,GAAW,AACvB,CAAA,EAAA,EAAA,QAAA,AAAQ,IAIV,MAAM,EACH,IAAI,CAAC,oBACL,MAAM,CAAC,CAAE,WAAY,CAAC,EAAU,UAAU,GAAI,CAAC,CAAI,CAAE,GACrD,EAAE,CAAC,KAAM,GAEZ,IAAM,EAAc,EAAU,aAAa,EAAwD,cAAgB,kBAEnH,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,mBAAmB,CAAA,CAClB,UAAW,CACT,GAAG,CAAS,CACZ,OAAQ,CAAE,aAAc,CAAW,CACrC,GAGN","ignoreList":[0]}