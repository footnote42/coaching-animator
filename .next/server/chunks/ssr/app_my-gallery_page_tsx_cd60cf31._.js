module.exports=[9814,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(9941),f=a.i(70106);let g=(0,f.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var h=a.i(96221);let i=(0,f.default)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);var j=a.i(41710),k=a.i(17545);let l=(0,f.default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),m=(0,f.default)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),n=(0,f.default)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),o=(0,f.default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),p=(0,f.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var q=a.i(25015);let r=(0,f.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var s=a.i(33441);let t={tactic:"Tactic",skill:"Skill",game:"Game",other:"Other"},u={private:(0,b.jsx)(l,{className:"w-3.5 h-3.5"}),link_shared:(0,b.jsx)(m,{className:"w-3.5 h-3.5"}),public:(0,b.jsx)(n,{className:"w-3.5 h-3.5"})},v={private:"Private",link_shared:"Link Only",public:"Public"};function w({animation:a,onEdit:d,onDelete:e,onPlay:f,showActions:g=!0,showCopyLink:h=!0}){let[i,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(!1),w="private"!==a.visibility,x=async b=>{b.stopPropagation();let c=`${window.location.origin}/replay/${a.id}`;try{await navigator.clipboard.writeText(c),n(!0),setTimeout(()=>n(!1),2e3)}catch(a){console.error("Failed to copy:",a)}};return(0,b.jsxs)("div",{className:"border border-border bg-surface hover:border-primary transition-colors",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[(0,b.jsxs)("div",{className:"relative aspect-[4/3] bg-surface-warm flex items-center justify-center cursor-pointer group",onClick:()=>f?.(a.id),children:[(0,b.jsxs)("div",{className:"text-text-primary/30 text-sm font-mono",children:[a.frame_count," frames"]}),(0,b.jsx)("div",{className:`absolute inset-0 bg-primary/80 flex items-center justify-center transition-opacity ${i?"opacity-100":"opacity-0"}`,children:(0,b.jsx)(q.Play,{className:"w-12 h-12 text-text-inverse fill-current"})}),(0,b.jsxs)("div",{className:"absolute top-2 right-2 flex items-center gap-1 px-2 py-1 bg-surface/90 text-xs font-medium",children:[u[a.visibility],(0,b.jsx)("span",{children:v[a.visibility]})]})]}),(0,b.jsxs)("div",{className:"p-3",children:[(0,b.jsx)("h3",{className:"font-heading font-semibold text-text-primary truncate mb-1",children:a.title}),(0,b.jsxs)("div",{className:"flex items-center gap-3 text-xs text-text-primary/70 mb-2",children:[(0,b.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,b.jsx)(j.Clock,{className:"w-3.5 h-3.5"}),function(a){let b=Math.floor(a/1e3);if(b<60)return`${b}s`;let c=Math.floor(b/60);return`${c}m ${b%60}s`}(a.duration_ms)]}),(0,b.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,b.jsx)(k.Layers,{className:"w-3.5 h-3.5"}),a.frame_count]}),(0,b.jsx)("span",{className:"px-1.5 py-0.5 bg-primary/10 text-primary text-[10px] font-medium uppercase",children:t[a.animation_type]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs text-text-primary/50",children:[(0,b.jsx)("span",{children:new Date(a.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[h&&w&&(0,b.jsx)("button",{onClick:x,className:`p-1.5 transition-colors ${m?"text-green-600":"hover:bg-surface-warm"}`,title:m?"Copied!":"Copy Link",children:m?(0,b.jsx)(s.Check,{className:"w-4 h-4"}):(0,b.jsx)(r,{className:"w-4 h-4"})}),g&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),d?.(a.id)},className:"p-1.5 hover:bg-surface-warm transition-colors",title:"Edit",children:(0,b.jsx)(o,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),e?.(a.id)},className:"p-1.5 hover:bg-red-50 text-red-600 transition-colors",title:"Delete",children:(0,b.jsx)(p,{className:"w-4 h-4"})})]})]})]})]})]})}var x=a.i(33508);let y=[{value:"tactic",label:"Tactic"},{value:"skill",label:"Skill"},{value:"game",label:"Game"},{value:"other",label:"Other"}],z=[{value:"private",label:"Private",description:"Only you can see this"},{value:"link_shared",label:"Link Only",description:"Anyone with the link can view"},{value:"public",label:"Public",description:"Visible in public gallery"}];function A({animation:a,onClose:d,onSave:e}){let[f,g]=(0,c.useState)(a.title),[i,j]=(0,c.useState)(a.animation_type),[k,l]=(0,c.useState)(a.visibility),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(null),q=async b=>{if(b.preventDefault(),!f.trim())return void p("Title is required");n(!0),p(null);try{let b=await fetch(`/api/animations/${a.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:f.trim(),animation_type:i,visibility:k})});if(!b.ok){let a=await b.json();throw Error(a.error?.message||"Failed to update")}e()}catch(a){p(a instanceof Error?a.message:"An error occurred")}finally{n(!1)}};return(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:d}),(0,b.jsxs)("div",{className:"relative w-full max-w-md bg-surface border border-border mx-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[(0,b.jsx)("h2",{className:"text-lg font-heading font-semibold text-text-primary",children:"Edit Animation"}),(0,b.jsx)("button",{onClick:d,className:"p-1 hover:bg-surface-warm transition-colors","aria-label":"Close modal",children:(0,b.jsx)(x.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("form",{onSubmit:q,className:"p-4",children:[o&&(0,b.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 text-sm",children:o}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{htmlFor:"animation-title",className:"block text-sm font-medium text-text-primary mb-1",children:"Title"}),(0,b.jsx)("input",{type:"text",id:"animation-title",value:f,onChange:a=>g(a.target.value),className:"w-full px-3 py-2 border border-border bg-surface focus:border-primary focus:outline-none",maxLength:100,placeholder:"Enter animation title",required:!0})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Type"}),(0,b.jsx)("div",{className:"flex gap-2",children:y.map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>j(a.value),className:`flex-1 px-3 py-2 text-sm font-medium transition-colors ${i===a.value?"bg-primary text-text-inverse":"bg-surface border border-border hover:border-primary"}`,children:a.label},a.value))})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Visibility"}),(0,b.jsx)("div",{className:"space-y-2",children:z.map(a=>(0,b.jsxs)("label",{className:`flex items-start p-3 cursor-pointer border transition-colors ${k===a.value?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:[(0,b.jsx)("input",{type:"radio",name:"visibility",value:a.value,checked:k===a.value,onChange:()=>l(a.value),className:"mt-0.5 mr-3"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-text-primary",children:a.label}),(0,b.jsx)("div",{className:"text-xs text-text-primary/70",children:a.description})]})]},a.value))})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{type:"button",onClick:d,className:"flex-1 px-4 py-2 border border-border text-text-primary font-medium hover:bg-surface-warm transition-colors",disabled:m,children:"Cancel"}),(0,b.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-primary text-text-inverse font-medium hover:bg-primary/90 transition-colors disabled:opacity-50",disabled:m,children:m?(0,b.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)(h.Loader2,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})]})]})}let B=(0,f.default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);function C({title:a,isDeleting:c,onConfirm:d,onCancel:e}){return(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:e}),(0,b.jsx)("div",{className:"relative w-full max-w-sm bg-surface border border-border mx-4 p-6",children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-red-100 flex items-center justify-center",children:(0,b.jsx)(B,{className:"w-5 h-5 text-red-600"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"text-lg font-heading font-semibold text-text-primary mb-2",children:"Delete Animation"}),(0,b.jsxs)("p",{className:"text-sm text-text-primary/70 mb-4",children:["Are you sure you want to delete ",(0,b.jsxs)("strong",{children:['"',a,'"']}),"? This action cannot be undone."]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 border border-border text-text-primary font-medium hover:bg-surface-warm transition-colors",disabled:c,children:"Cancel"}),(0,b.jsx)("button",{type:"button",onClick:d,className:"flex-1 px-4 py-2 bg-red-600 text-white font-medium hover:bg-red-700 transition-colors disabled:opacity-50",disabled:c,children:c?(0,b.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)(h.Loader2,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete"})]})]})]})})]})}var D=a.i(69240);let E=[{value:"created_at",label:"Date Created"},{value:"title",label:"Title"},{value:"duration_ms",label:"Duration"},{value:"animation_type",label:"Type"}];function F(){let a=(0,d.useRouter)(),[f,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(0),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)("created_at"),[r,s]=(0,c.useState)("desc"),[t,u]=(0,c.useState)(null),[v,x]=(0,c.useState)(null),[y,z]=(0,c.useState)(!1),B=(0,c.useCallback)(async()=>{m(!0),o(null);try{let b=new URLSearchParams({sort:p,order:r,limit:"50",offset:"0"}),c=await fetch(`/api/animations?${b}`);if(!c.ok){if(401===c.status)return void a.push("/login?redirect=/my-gallery");throw Error("Failed to fetch animations")}let d=await c.json();i(d.animations),k(d.total)}catch(a){o(a instanceof Error?a.message:"An error occurred")}finally{m(!1)}},[p,r,a]);(0,c.useEffect)(()=>{(async()=>{let b=(0,D.createSupabaseBrowserClient)(),{data:{user:c}}=await b.auth.getUser();c?B():a.push("/login?redirect=/my-gallery")})()},[B,a]);let F=a=>{u(a)},H=async()=>{u(null),await B()},I=a=>{x(a)},J=async()=>{if(v){z(!0);try{if(!(await fetch(`/api/animations/${v}`,{method:"DELETE"})).ok)throw Error("Failed to delete animation");x(null),await B()}catch(a){o(a instanceof Error?a.message:"Failed to delete")}finally{z(!1)}}},K=b=>{a.push(`/app?load=${b}`)},L=t?f.find(a=>a.id===t):null,M=v?f.find(a=>a.id===v):null;return(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)("header",{className:"border-b border-border bg-surface",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-heading font-bold text-text-primary",children:"My Playbook"}),(0,b.jsxs)("p",{className:"text-sm text-text-primary/70",children:[j," animation",1!==j?"s":""," saved"]})]}),(0,b.jsxs)("a",{href:"/app",className:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-text-inverse font-medium hover:bg-primary/90 transition-colors",children:[(0,b.jsx)(g,{className:"w-4 h-4"}),"New Animation"]})]})}),(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4 border-b border-border bg-surface-warm",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(e.ArrowUpDown,{className:"w-4 h-4 text-text-primary/70"}),(0,b.jsx)("span",{className:"text-sm text-text-primary/70 mr-2",children:"Sort by:"}),E.map(a=>(0,b.jsxs)("button",{onClick:()=>{var b;(b=a.value)===p?s("asc"===r?"desc":"asc"):(q(b),s("desc"))},className:`px-3 py-1.5 text-sm font-medium transition-colors ${p===a.value?"bg-primary text-text-inverse":"bg-surface border border-border hover:border-primary"}`,children:[a.label,p===a.value&&(0,b.jsx)("span",{className:"ml-1",children:"asc"===r?"↑":"↓"})]},a.value))]})}),(0,b.jsx)("main",{className:"max-w-7xl mx-auto px-4 py-8",children:l?(0,b.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,b.jsx)(h.Loader2,{className:"w-8 h-8 animate-spin text-primary"})}):n?(0,b.jsxs)("div",{className:"text-center py-20",children:[(0,b.jsx)("p",{className:"text-red-600 mb-4",children:n}),(0,b.jsx)("button",{onClick:B,className:"px-4 py-2 bg-primary text-text-inverse font-medium",children:"Try Again"})]}):0===f.length?(0,b.jsx)(G,{}):(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:f.map(a=>(0,b.jsx)(w,{animation:a,onEdit:F,onDelete:I,onPlay:K},a.id))})}),L&&(0,b.jsx)(A,{animation:L,onClose:()=>u(null),onSave:H}),M&&(0,b.jsx)(C,{title:M.title,isDeleting:y,onConfirm:J,onCancel:()=>x(null)})]})}function G(){return(0,b.jsxs)("div",{className:"text-center py-20",children:[(0,b.jsx)("div",{className:"w-24 h-24 mx-auto mb-6 bg-surface-warm border-2 border-dashed border-border flex items-center justify-center",children:(0,b.jsx)(i,{className:"w-12 h-12 text-text-primary/30"})}),(0,b.jsx)("h2",{className:"text-xl font-heading font-semibold text-text-primary mb-2",children:"Your Playbook is Empty"}),(0,b.jsx)("p",{className:"text-text-primary/70 mb-6 max-w-md mx-auto",children:"Start creating rugby animations and save them to the cloud to build your personal playbook."}),(0,b.jsxs)("a",{href:"/app",className:"inline-flex items-center gap-2 px-6 py-3 bg-primary text-text-inverse font-medium hover:bg-primary/90 transition-colors",children:[(0,b.jsx)(g,{className:"w-5 h-5"}),"Create Your First Animation"]})]})}a.s(["default",()=>F],9814)}];

//# sourceMappingURL=app_my-gallery_page_tsx_cd60cf31._.js.map