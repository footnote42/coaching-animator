module.exports=[33354,(a,b,c)=>{"use strict";c._=function(a){return a&&a.__esModule?a:{default:a}}},32245,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"BailoutToCSR",{enumerable:!0,get:function(){return e}});let d=a.r(41997);function e({reason:a,children:b}){throw Object.defineProperty(new d.BailoutToCSRError(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}},7773,(a,b,c)=>{"use strict";function d(a){return a.split("/").map(a=>encodeURIComponent(a)).join("/")}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"encodeURIPath",{enumerable:!0,get:function(){return d}})},68063,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={getDeploymentId:function(){return f},getDeploymentIdQueryOrEmptyString:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(){return!1}function g(){return""}},97458,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"PreloadChunks",{enumerable:!0,get:function(){return i}});let d=a.r(87924),e=a.r(35112),f=a.r(56704),g=a.r(7773),h=a.r(68063);function i({moduleIds:a}){let b=f.workAsyncStorage.getStore();if(void 0===b)return null;let c=[];if(b.reactLoadableManifest&&a){let d=b.reactLoadableManifest;for(let b of a){if(!d[b])continue;let a=d[b].files;c.push(...a)}}if(0===c.length)return null;let i=(0,h.getDeploymentIdQueryOrEmptyString)();return(0,d.jsx)(d.Fragment,{children:c.map(a=>{let c=`${b.assetPrefix}/_next/${(0,g.encodeURIPath)(a)}${i}`;return a.endsWith(".css")?(0,d.jsx)("link",{precedence:"dynamic",href:c,rel:"stylesheet",as:"style",nonce:b.nonce},a):((0,e.preload)(c,{as:"script",fetchPriority:"low",nonce:b.nonce}),null)})})}},69853,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return j}});let d=a.r(87924),e=a.r(72131),f=a.r(32245),g=a.r(97458);function h(a){return{default:a&&"default"in a?a.default:a}}let i={loader:()=>Promise.resolve(h(()=>null)),loading:null,ssr:!0},j=function(a){let b={...i,...a},c=(0,e.lazy)(()=>b.loader().then(h)),j=b.loading;function k(a){let h=j?(0,d.jsx)(j,{isLoading:!0,pastDelay:!0,error:null}):null,i=!b.ssr||!!b.loading,k=i?e.Suspense:e.Fragment,l=b.ssr?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.PreloadChunks,{moduleIds:b.modules}),(0,d.jsx)(c,{...a})]}):(0,d.jsx)(f.BailoutToCSR,{reason:"next/dynamic",children:(0,d.jsx)(c,{...a})});return(0,d.jsx)(k,{...i?{fallback:h}:{},children:l})}return k.displayName="LoadableComponent",k}},19721,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return e}});let d=a.r(33354)._(a.r(69853));function e(a,b){let c={};"function"==typeof a&&(c.loader=a);let e={...c,...b};return(0,d.default)({...e,modules:e.loadableGenerated?.modules})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},26336,a=>{"use strict";let b,c;var d,e=a.i(87924),f=a.i(19721),g=a.i(72131),h=a.i(50944),i=a.i(69240),j=a.i(33508),k=a.i(96221),l=a.i(70106);let m=(0,l.default)("cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),n=(0,l.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),o=[{value:"tactic",label:"Tactic",description:"Set plays and tactical movements"},{value:"skill",label:"Skill",description:"Technical drills and exercises"},{value:"game",label:"Game",description:"Match situations and scenarios"},{value:"other",label:"Other",description:"Other animation types"}],p=[{value:"private",label:"Private",description:"Only you can see this animation"},{value:"link_shared",label:"Link Only",description:"Anyone with the link can view"},{value:"public",label:"Public",description:"Visible in the public gallery"}];function q({projectName:a,payload:b,onClose:c,onSuccess:d}){let[f,h]=(0,g.useState)(a||"Untitled Animation"),[i,l]=(0,g.useState)(""),[q,r]=(0,g.useState)("tactic"),[s,t]=(0,g.useState)("private"),[u,v]=(0,g.useState)(""),[w,x]=(0,g.useState)(!1),[y,z]=(0,g.useState)(null),A=async a=>{if(a.preventDefault(),!f.trim())return void z("Title is required");x(!0),z(null);try{let a=u.split(",").map(a=>a.trim()).filter(a=>a.length>0).slice(0,10),c=await fetch("/api/animations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:f.trim(),description:i.trim()||void 0,animation_type:q,visibility:s,tags:a.length>0?a:void 0,payload:b})});if(!c.ok){let a=await c.json();throw Error(a.error?.message||"Failed to save animation")}let e=await c.json();d(e.id)}catch(a){z(a instanceof Error?a.message:"An error occurred")}finally{x(!1)}};return(0,e.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,e.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:c}),(0,e.jsxs)("div",{className:"relative w-full max-w-lg bg-surface border border-border mx-4 max-h-[90vh] overflow-y-auto",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-border sticky top-0 bg-surface",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)(m,{className:"w-5 h-5 text-primary"}),(0,e.jsx)("h2",{className:"text-lg font-heading font-semibold text-text-primary",children:"Save to Cloud"})]}),(0,e.jsx)("button",{onClick:c,className:"p-1 hover:bg-surface-warm transition-colors","aria-label":"Close modal",children:(0,e.jsx)(j.X,{className:"w-5 h-5"})})]}),(0,e.jsxs)("form",{onSubmit:A,className:"p-4",children:[y&&(0,e.jsxs)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 text-sm flex items-start gap-2",children:[(0,e.jsx)(n,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),(0,e.jsx)("span",{children:y})]}),(0,e.jsxs)("div",{className:"mb-4",children:[(0,e.jsxs)("label",{htmlFor:"save-title",className:"block text-sm font-medium text-text-primary mb-1",children:["Title ",(0,e.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,e.jsx)("input",{type:"text",id:"save-title",value:f,onChange:a=>h(a.target.value),className:"w-full px-3 py-2 border border-border bg-surface focus:border-primary focus:outline-none",maxLength:100,placeholder:"Enter a title for your animation",required:!0}),(0,e.jsxs)("p",{className:"text-xs text-text-primary/50 mt-1",children:[f.length,"/100 characters"]})]}),(0,e.jsxs)("div",{className:"mb-4",children:[(0,e.jsx)("label",{htmlFor:"save-description",className:"block text-sm font-medium text-text-primary mb-1",children:"Description"}),(0,e.jsx)("textarea",{id:"save-description",value:i,onChange:a=>l(a.target.value),className:"w-full px-3 py-2 border border-border bg-surface focus:border-primary focus:outline-none resize-none",rows:3,maxLength:2e3,placeholder:"Describe your animation (optional)"}),(0,e.jsxs)("p",{className:"text-xs text-text-primary/50 mt-1",children:[i.length,"/2000 characters"]})]}),(0,e.jsxs)("div",{className:"mb-4",children:[(0,e.jsxs)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:["Animation Type ",(0,e.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,e.jsx)("div",{className:"grid grid-cols-2 gap-2",children:o.map(a=>(0,e.jsxs)("button",{type:"button",onClick:()=>r(a.value),className:`p-3 text-left transition-colors border ${q===a.value?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:[(0,e.jsx)("div",{className:"font-medium text-sm text-text-primary",children:a.label}),(0,e.jsx)("div",{className:"text-xs text-text-primary/60",children:a.description})]},a.value))})]}),(0,e.jsxs)("div",{className:"mb-4",children:[(0,e.jsx)("label",{htmlFor:"save-tags",className:"block text-sm font-medium text-text-primary mb-1",children:"Tags"}),(0,e.jsx)("input",{type:"text",id:"save-tags",value:u,onChange:a=>v(a.target.value),className:"w-full px-3 py-2 border border-border bg-surface focus:border-primary focus:outline-none",placeholder:"lineout, scrum, backs (comma-separated)"}),(0,e.jsx)("p",{className:"text-xs text-text-primary/50 mt-1",children:"Up to 10 tags, separated by commas"})]}),(0,e.jsxs)("div",{className:"mb-6",children:[(0,e.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Visibility"}),(0,e.jsx)("div",{className:"space-y-2",children:p.map(a=>(0,e.jsxs)("label",{className:`flex items-start p-3 cursor-pointer border transition-colors ${s===a.value?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:[(0,e.jsx)("input",{type:"radio",name:"visibility",value:a.value,checked:s===a.value,onChange:()=>t(a.value),className:"mt-0.5 mr-3"}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"font-medium text-text-primary",children:a.label}),(0,e.jsx)("div",{className:"text-xs text-text-primary/70",children:a.description})]})]},a.value))})]}),(0,e.jsxs)("div",{className:"flex gap-3",children:[(0,e.jsx)("button",{type:"button",onClick:c,className:"flex-1 px-4 py-2 border border-border text-text-primary font-medium hover:bg-surface-warm transition-colors",disabled:w,children:"Cancel"}),(0,e.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-primary text-text-inverse font-medium hover:bg-primary/90 transition-colors disabled:opacity-50",disabled:w,children:w?(0,e.jsxs)("span",{className:"inline-flex items-center justify-center gap-2",children:[(0,e.jsx)(k.Loader2,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):(0,e.jsxs)("span",{className:"inline-flex items-center justify-center gap-2",children:[(0,e.jsx)(m,{className:"w-4 h-4"}),"Save to Cloud"]})})]})]})]})]})}let r=a=>{let b,c=new Set,d=(a,d)=>{let e="function"==typeof a?a(b):a;if(!Object.is(e,b)){let a=b;b=(null!=d?d:"object"!=typeof e||null===e)?e:Object.assign({},b,e),c.forEach(c=>c(b,a))}},e=()=>b,f={setState:d,getState:e,getInitialState:()=>g,subscribe:a=>(c.add(a),()=>c.delete(a))},g=b=a(d,e,f);return f},s={get url(){return`file://${a.P("node_modules/zustand/esm/middleware.mjs")}`}},t=new Map,u=a=>{let b=t.get(a);return b?Object.fromEntries(Object.entries(b.stores).map(([a,b])=>[a,b.getState()])):{}},v=(a,b)=>{let c;try{c=JSON.parse(a)}catch(a){console.error("[zustand devtools middleware] Could not parse the received json",a)}void 0!==c&&b(c)};a.i(35112);let w=Array(12).fill(0),x=1,y=new class{constructor(){this.subscribe=a=>(this.subscribers.push(a),()=>{let b=this.subscribers.indexOf(a);this.subscribers.splice(b,1)}),this.publish=a=>{this.subscribers.forEach(b=>b(a))},this.addToast=a=>{this.publish(a),this.toasts=[...this.toasts,a]},this.create=a=>{var b;let{message:c,...d}=a,e="number"==typeof(null==a?void 0:a.id)||(null==(b=a.id)?void 0:b.length)>0?a.id:x++,f=this.toasts.find(a=>a.id===e),g=void 0===a.dismissible||a.dismissible;return this.dismissedToasts.has(e)&&this.dismissedToasts.delete(e),f?this.toasts=this.toasts.map(b=>b.id===e?(this.publish({...b,...a,id:e,title:c}),{...b,...a,id:e,dismissible:g,title:c}):b):this.addToast({title:c,...d,dismissible:g,id:e}),e},this.dismiss=a=>(a?(this.dismissedToasts.add(a),requestAnimationFrame(()=>this.subscribers.forEach(b=>b({id:a,dismiss:!0})))):this.toasts.forEach(a=>{this.subscribers.forEach(b=>b({id:a.id,dismiss:!0}))}),a),this.message=(a,b)=>this.create({...b,message:a}),this.error=(a,b)=>this.create({...b,message:a,type:"error"}),this.success=(a,b)=>this.create({...b,type:"success",message:a}),this.info=(a,b)=>this.create({...b,type:"info",message:a}),this.warning=(a,b)=>this.create({...b,type:"warning",message:a}),this.loading=(a,b)=>this.create({...b,type:"loading",message:a}),this.promise=(a,b)=>{let c,d;if(!b)return;void 0!==b.loading&&(d=this.create({...b,promise:a,type:"loading",message:b.loading,description:"function"!=typeof b.description?b.description:void 0}));let e=Promise.resolve(a instanceof Function?a():a),f=void 0!==d,h=e.then(async a=>{if(c=["resolve",a],g.default.isValidElement(a))f=!1,this.create({id:d,type:"default",message:a});else if(z(a)&&!a.ok){f=!1;let c="function"==typeof b.error?await b.error(`HTTP error! status: ${a.status}`):b.error,e="function"==typeof b.description?await b.description(`HTTP error! status: ${a.status}`):b.description,h="object"!=typeof c||g.default.isValidElement(c)?{message:c}:c;this.create({id:d,type:"error",description:e,...h})}else if(a instanceof Error){f=!1;let c="function"==typeof b.error?await b.error(a):b.error,e="function"==typeof b.description?await b.description(a):b.description,h="object"!=typeof c||g.default.isValidElement(c)?{message:c}:c;this.create({id:d,type:"error",description:e,...h})}else if(void 0!==b.success){f=!1;let c="function"==typeof b.success?await b.success(a):b.success,e="function"==typeof b.description?await b.description(a):b.description,h="object"!=typeof c||g.default.isValidElement(c)?{message:c}:c;this.create({id:d,type:"success",description:e,...h})}}).catch(async a=>{if(c=["reject",a],void 0!==b.error){f=!1;let c="function"==typeof b.error?await b.error(a):b.error,e="function"==typeof b.description?await b.description(a):b.description,h="object"!=typeof c||g.default.isValidElement(c)?{message:c}:c;this.create({id:d,type:"error",description:e,...h})}}).finally(()=>{f&&(this.dismiss(d),d=void 0),null==b.finally||b.finally.call(b)}),i=()=>new Promise((a,b)=>h.then(()=>"reject"===c[0]?b(c[1]):a(c[1])).catch(b));return"string"!=typeof d&&"number"!=typeof d?{unwrap:i}:Object.assign(d,{unwrap:i})},this.custom=(a,b)=>{let c=(null==b?void 0:b.id)||x++;return this.create({jsx:a(c),id:c,...b}),c},this.getActiveToasts=()=>this.toasts.filter(a=>!this.dismissedToasts.has(a.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},z=a=>a&&"object"==typeof a&&"ok"in a&&"boolean"==typeof a.ok&&"status"in a&&"number"==typeof a.status,A=Object.assign((a,b)=>{let c=(null==b?void 0:b.id)||x++;return y.addToast({title:a,...b,id:c}),c},{success:y.success,info:y.info,warning:y.warning,error:y.error,custom:y.custom,message:y.message,promise:y.promise,dismiss:y.dismiss,loading:y.loading},{getHistory:()=>y.toasts,getToasts:()=>y.getActiveToasts()});!function(a){if(!a||"u"<typeof document)return;let b=document.head||document.getElementsByTagName("head")[0],c=document.createElement("style");c.type="text/css",b.appendChild(c),c.styleSheet?c.styleSheet.cssText=a:c.appendChild(document.createTextNode(a))}("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");let B={primary:"#1A3D1A",background:"#F8F9FA",surface:"#FFFFFF",surfaceWarm:"#F9FAFB",border:"#1A3D1A",textPrimary:"#111827",textInverse:"#F8F9FA",accentWarm:"#D97706",attack:["#2563EB","#10B981","#06B6D4","#8B5CF6"],defense:["#DC2626","#EA580C","#F59E0B","#EF4444"],neutral:["#FFFFFF","#8B4513","#FFD700","#FF6B35"],annotation:"#FACC15"},C=100,D=50,E=10,F=/^[\w\s\-\.]*$/,G=/^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$/,H=0,I=2e3,J=100,K=1e4,L=a=>a.length<=E&&F.test(a),M=(b=(d=((a,b={})=>(c,d,e)=>{let f,{enabled:g,anonymousActionType:h,store:i,...j}=b;try{f=(null!=g?g:(s.env?s.env.MODE:void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(a){}if(!f)return a(c,d,e);let{connection:k,...l}=((a,b,c)=>{if(void 0===a)return{type:"untracked",connection:b.connect(c)};let d=t.get(c.name);if(d)return{type:"tracked",store:a,...d};let e={connection:b.connect(c),stores:{}};return t.set(c.name,e),{type:"tracked",store:a,...e}})(i,f,j),m=!0;e.setState=(a,b,f)=>{let g=c(a,b);if(!m)return g;let l=void 0===f?{type:h||(a=>{var b,c;if(!a)return;let d=a.split("\n"),e=d.findIndex(a=>a.includes("api.setState"));if(e<0)return;let f=(null==(b=d[e+1])?void 0:b.trim())||"";return null==(c=/.+ (.+) .+/.exec(f))?void 0:c[1]})(Error().stack)||"anonymous"}:"string"==typeof f?{type:f}:f;return void 0===i?null==k||k.send(l,d()):null==k||k.send({...l,type:`${i}/${l.type}`},{...u(j.name),[i]:e.getState()}),g},e.devtools={cleanup:()=>{k&&"function"==typeof k.unsubscribe&&k.unsubscribe(),((a,b)=>{if(void 0===b)return;let c=t.get(a);c&&(delete c.stores[b],0===Object.keys(c.stores).length&&t.delete(a))})(j.name,i)}};let n=(...a)=>{let b=m;m=!1,c(...a),m=b},o=a(e.setState,d,e);if("untracked"===l.type?null==k||k.init(o):(l.stores[l.store]=e,null==k||k.init(Object.fromEntries(Object.entries(l.stores).map(([a,b])=>[a,a===l.store?o:b.getState()])))),e.dispatchFromDevtools&&"function"==typeof e.dispatch){let a=!1,b=e.dispatch;e.dispatch=(...c)=>{(s.env?s.env.MODE:void 0)==="production"||"__setState"!==c[0].type||a||(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),a=!0),b(...c)}}return k.subscribe(a=>{var b;switch(a.type){case"ACTION":if("string"!=typeof a.payload)return void console.error("[zustand devtools middleware] Unsupported action format");return v(a.payload,a=>{if("__setState"===a.type){if(void 0===i)return void n(a.state);1!==Object.keys(a.state).length&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);let b=a.state[i];return void(null==b||JSON.stringify(e.getState())!==JSON.stringify(b)&&n(b))}e.dispatchFromDevtools&&"function"==typeof e.dispatch&&e.dispatch(a)});case"DISPATCH":switch(a.payload.type){case"RESET":if(n(o),void 0===i)return null==k?void 0:k.init(e.getState());return null==k?void 0:k.init(u(j.name));case"COMMIT":if(void 0===i){null==k||k.init(e.getState());break}return null==k?void 0:k.init(u(j.name));case"ROLLBACK":return v(a.state,a=>{if(void 0===i){n(a),null==k||k.init(e.getState());return}n(a[i]),null==k||k.init(u(j.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return v(a.state,a=>{void 0===i?n(a):JSON.stringify(e.getState())!==JSON.stringify(a[i])&&n(a[i])});case"IMPORT_STATE":{let{nextLiftedState:c}=a.payload,d=null==(b=c.computedStates.slice(-1)[0])?void 0:b.state;if(!d)return;void 0===i?n(d):n(d[i]),null==k||k.send(null,c);break}case"PAUSE_RECORDING":return m=!m}return}}),o})(a=>({project:null,currentFrameIndex:0,isPlaying:!1,isDirty:!1,playbackSpeed:1,loopPlayback:!1,playbackPosition:null,newProject:()=>a(()=>{let a=crypto.randomUUID(),b=crypto.randomUUID(),c=new Date().toISOString();return{project:{version:"1.0",id:a,name:"Untitled Play",sport:"rugby-union",createdAt:c,updatedAt:c,frames:[{id:b,index:0,duration:2e3,entities:{},annotations:[]}],settings:{showGrid:!0,gridSpacing:50,defaultTransitionDuration:2e3,exportResolution:"720p"}},currentFrameIndex:0,isPlaying:!1,isDirty:!1,playbackSpeed:1,loopPlayback:!1}}),loadProject:b=>{let c={success:!1,errors:[],warnings:[]};return a(a=>{let d=(a=>{var b;let c,d=[],e=[];if(!a||"object"!=typeof a)return d.push("Invalid project data: expected an object"),{success:!1,errors:d,warnings:e};if("string"!=typeof a.version&&d.push('Missing or invalid "version" field'),"string"==typeof a.id&&(b=a.id,/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(b))||d.push('Missing or invalid "id" field (must be UUID)'),"string"==typeof a.name&&(c=a.name).length>=1&&c.length<=C||d.push('Missing or invalid "name" field'),["rugby-union","rugby-league","soccer","american-football"].includes(a.sport)||d.push('Invalid "sport" field'),"string"!=typeof a.createdAt&&d.push('Missing or invalid "createdAt" field'),"string"!=typeof a.updatedAt&&d.push('Missing or invalid "updatedAt" field'),Array.isArray(a.frames)?(0===a.frames.length&&d.push("Project must have at least one frame"),a.frames.length>D&&d.push(`Too many frames (max: ${D})`),a.frames.forEach((a,b)=>{var c;let f;a&&"object"==typeof a?("string"==typeof a.id&&(c=a.id,/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(c))||d.push(`Frame ${b}: invalid id`),("number"!=typeof a.index||a.index!==b)&&d.push(`Frame ${b}: invalid index (expected ${b})`),"number"==typeof a.duration&&Number.isInteger(f=a.duration)&&f>=J&&f<=K||d.push(`Frame ${b}: invalid duration`),a.entities&&"object"==typeof a.entities?Object.entries(a.entities).forEach(([a,c])=>{var f;let g,h,i;c&&"object"==typeof c?("string"==typeof c.id&&(f=c.id,/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(f))||d.push(`Frame ${b}, Entity ${a}: invalid id`),["player","ball","cone","marker"].includes(c.type)||d.push(`Frame ${b}, Entity ${a}: invalid type`),"number"==typeof c.x&&"number"==typeof c.y&&(g=c.x,h=c.y,g>=H&&g<=I&&h>=H&&h<=I)||d.push(`Frame ${b}, Entity ${a}: invalid coordinates`),"string"==typeof c.color&&(i=c.color,G.test(i))||e.push(`Frame ${b}, Entity ${a}: invalid color format`),"string"==typeof c.label&&L(c.label)||e.push(`Frame ${b}, Entity ${a}: invalid label`),["attack","defense","neutral"].includes(c.team)||d.push(`Frame ${b}, Entity ${a}: invalid team`)):d.push(`Frame ${b}, Entity ${a}: invalid entity object`)}):d.push(`Frame ${b}: invalid entities object`),Array.isArray(a.annotations)||d.push(`Frame ${b}: invalid annotations (must be array)`)):d.push(`Frame ${b}: invalid frame object`)})):d.push('Missing or invalid "frames" field (must be array)'),a.settings&&"object"==typeof a.settings){let b=a.settings;"boolean"!=typeof b.showGrid&&d.push("Settings: invalid showGrid"),"number"!=typeof b.gridSpacing&&d.push("Settings: invalid gridSpacing"),"number"!=typeof b.defaultTransitionDuration&&d.push("Settings: invalid defaultTransitionDuration"),["720p","1080p"].includes(b.exportResolution)||d.push("Settings: invalid exportResolution")}else d.push('Missing or invalid "settings" object');return{success:0===d.length,errors:d,warnings:e}})(b);return d.success?(c={success:!0,errors:[],warnings:d.warnings},{...a,project:b,currentFrameIndex:0,isPlaying:!1,isDirty:!1,playbackSpeed:1,loopPlayback:!1}):(c={success:!1,errors:d.errors,warnings:d.warnings},a)}),c},loadFromSharePayload:b=>a(a=>{let c=new Date().toISOString(),d=crypto.randomUUID(),e=[],f={};b.entities.forEach(a=>{f[a.id]={id:a.id,type:a.type,team:"defence"===a.team?"defense":a.team,color:"attack"===a.team?B.attack[0]:"defence"===a.team?B.defense[0]:"#ffffff",label:"",x:a.x,y:a.y}});for(let a=0;a<b.frames.length;a++){let c=b.frames[a],d=b.frames[a+1];c.updates&&c.updates.forEach(a=>{f[a.id]&&(f[a.id]={...f[a.id],x:a.x,y:a.y})});let g=d?(d.t-c.t)*1e3:2e3;e.push({id:crypto.randomUUID(),index:a,duration:g,entities:{...f},annotations:[]})}return 0===e.length&&e.push({id:crypto.randomUUID(),index:0,duration:2e3,entities:{...f},annotations:[]}),{...a,project:{version:"1.0",id:d,name:"Shared Animation",sport:"rugby-union",createdAt:c,updatedAt:c,frames:e,settings:{showGrid:!1,gridSpacing:50,defaultTransitionDuration:1e3,exportResolution:"720p"}},currentFrameIndex:0,isPlaying:!1,isDirty:!1,playbackSpeed:1,loopPlayback:!0}}),saveProject:()=>{let b="";return a(a=>{if(!a.project)return a;let c={...a.project,updatedAt:new Date().toISOString()};return b=JSON.stringify(c,null,2),{...a,project:c,isDirty:!1}}),b},updateProjectSettings:b=>a(a=>{if(!a.project)return a;let c=new Date().toISOString();return{project:{...a.project,...void 0!==b.name&&{name:b.name},...void 0!==b.sport&&{sport:b.sport},updatedAt:c,settings:{...a.project.settings,...void 0!==b.showGrid&&{showGrid:b.showGrid},...void 0!==b.gridSpacing&&{gridSpacing:b.gridSpacing},...void 0!==b.defaultTransitionDuration&&{defaultTransitionDuration:b.defaultTransitionDuration},...void 0!==b.exportResolution&&{exportResolution:b.exportResolution}}},isDirty:!0}}),setCurrentFrame:b=>a(a=>!a.project||b<0||b>=a.project.frames.length?a:{...a,currentFrameIndex:b}),addFrame:()=>a(a=>{if(!a.project)return a;if(a.project.frames.length>=D)return console.warn(`Maximum frames reached (${D})`),A.error(`Maximum frames reached. You can have up to ${D} frames in a project.`),a;let b=a.project.frames[a.currentFrameIndex],c={id:crypto.randomUUID(),index:a.currentFrameIndex+1,duration:a.project.settings.defaultTransitionDuration,entities:{...b.entities},annotations:[]},d=a.project.frames.map(b=>({...b,index:b.index>a.currentFrameIndex?b.index+1:b.index}));return d.splice(a.currentFrameIndex+1,0,c),{...a,project:{...a.project,updatedAt:new Date().toISOString(),frames:d},currentFrameIndex:a.currentFrameIndex+1,isDirty:!0}}),removeFrame:b=>a(a=>{if(!a.project||a.project.frames.length<=1)return a;let c=a.project.frames.findIndex(a=>a.id===b);if(-1===c)return a;let d=a.project.frames.filter((a,b)=>b!==c).map((a,b)=>({...a,index:b})),e=a.currentFrameIndex;return c<a.currentFrameIndex?e=a.currentFrameIndex-1:c===a.currentFrameIndex&&c===a.project.frames.length-1&&(e=a.currentFrameIndex-1),{...a,project:{...a.project,updatedAt:new Date().toISOString(),frames:d},currentFrameIndex:e,isDirty:!0}}),duplicateFrame:b=>a(a=>{if(!a.project)return a;let c=a.project.frames.findIndex(a=>a.id===b);if(-1===c)return a;let d=a.project.frames[c],e={id:crypto.randomUUID(),index:c+1,duration:d.duration,entities:{...d.entities},annotations:[...d.annotations]},f=a.project.frames.map(a=>({...a,index:a.index>c?a.index+1:a.index}));return f.splice(c+1,0,e),{...a,project:{...a.project,updatedAt:new Date().toISOString(),frames:f},isDirty:!0}}),updateFrame:(b,c)=>a(a=>{if(!a.project)return a;let d=a.project.frames.findIndex(a=>a.id===b);if(-1===d)return a;let e=a.project.frames.map((a,b)=>{if(b!==d)return a;let e={...a};return void 0!==c.duration&&(e.duration=Math.max(J,Math.min(K,c.duration))),e});return{...a,project:{...a.project,updatedAt:new Date().toISOString(),frames:e},isDirty:!0}}),addEntity:b=>{let c="";return a(a=>{if(!a.project||a.currentFrameIndex<0||a.currentFrameIndex>=a.project.frames.length)return a;c=crypto.randomUUID();let d=b.team??"neutral",e=b.color??B[d][0],f=b.label??"",g=(a,b,c)=>Math.max(b,Math.min(c,a)),h=g(b.x,H,I),i=g(b.y,H,I),j={id:c,type:b.type,x:h,y:i,color:e,label:f,team:d},k={...a.project.frames[a.currentFrameIndex].entities,[c]:j};return{...a,project:{...a.project,updatedAt:new Date().toISOString(),frames:a.project.frames.map((b,c)=>c===a.currentFrameIndex?{...b,entities:k}:b)},isDirty:!0}}),c},updateEntity:(b,c)=>a(a=>{if(!a.project||a.currentFrameIndex<0||a.currentFrameIndex>=a.project.frames.length)return a;let d=a.project.frames[a.currentFrameIndex];if(!d.entities[b])return a;let e=d.entities[b],f={},g=(a,b,c)=>Math.max(b,Math.min(c,a));if(void 0!==c.x&&(f.x=g(c.x,H,I)),void 0!==c.y&&(f.y=g(c.y,H,I)),void 0!==c.color){let a;a=c.color,G.test(a)||console.warn(`Invalid hex color format: ${c.color}. Allowing anyway.`),f.color=c.color}void 0!==c.label&&(L(c.label)||console.warn(`Invalid entity label: ${c.label}. Allowing anyway.`),f.label=c.label),void 0!==c.team&&(f.team=c.team),void 0!==c.parentId&&(f.parentId=null===c.parentId?void 0:c.parentId);let h={...e,...f},i={...d.entities,[b]:h};return{...a,project:{...a.project,updatedAt:new Date().toISOString(),frames:a.project.frames.map((b,c)=>c===a.currentFrameIndex?{...b,entities:i}:b)},isDirty:!0}}),removeEntity:b=>a(a=>{if(!a.project||a.currentFrameIndex<0||a.currentFrameIndex>=a.project.frames.length)return a;let c=a.project.frames[a.currentFrameIndex];if(!c.entities[b])return a;let{[b]:d,...e}=c.entities;return{...a,project:{...a.project,updatedAt:new Date().toISOString(),frames:a.project.frames.map((b,c)=>c===a.currentFrameIndex?{...b,entities:e}:b)},isDirty:!0}}),removeEntityGlobally:()=>{},propagateEntity:()=>{},addAnnotation:b=>{let c="";return a(a=>{if(!a.project||a.currentFrameIndex<0||a.currentFrameIndex>=a.project.frames.length)return a;c=crypto.randomUUID();let d=a.project.frames[a.currentFrameIndex],e={id:c,type:b.type,points:b.points,color:b.color,startFrameId:d.id,endFrameId:d.id},f=[...d.annotations,e];return{...a,project:{...a.project,updatedAt:new Date().toISOString(),frames:a.project.frames.map((b,c)=>c===a.currentFrameIndex?{...b,annotations:f}:b)},isDirty:!0}}),c},updateAnnotation:(b,c)=>a(a=>{if(!a.project||a.currentFrameIndex<0||a.currentFrameIndex>=a.project.frames.length)return a;let d=a.project.frames[a.currentFrameIndex],e=d.annotations.findIndex(a=>a.id===b);if(-1===e)return a;let f=d.annotations.map((a,b)=>b!==e?a:{...a,...void 0!==c.points&&{points:c.points},...void 0!==c.color&&{color:c.color},...void 0!==c.startFrameId&&{startFrameId:c.startFrameId},...void 0!==c.endFrameId&&{endFrameId:c.endFrameId}});return{...a,project:{...a.project,updatedAt:new Date().toISOString(),frames:a.project.frames.map((b,c)=>c===a.currentFrameIndex?{...b,annotations:f}:b)},isDirty:!0}}),removeAnnotation:b=>a(a=>{if(!a.project||a.currentFrameIndex<0||a.currentFrameIndex>=a.project.frames.length)return a;let c=a.project.frames[a.currentFrameIndex].annotations.filter(a=>a.id!==b);return{...a,project:{...a.project,updatedAt:new Date().toISOString(),frames:a.project.frames.map((b,d)=>d===a.currentFrameIndex?{...b,annotations:c}:b)},isDirty:!0}}),play:()=>a(a=>({...a,isPlaying:!0})),pause:()=>a(a=>({...a,isPlaying:!1,playbackPosition:null})),reset:()=>a(a=>({...a,currentFrameIndex:0,isPlaying:!1,playbackPosition:null})),setPlaybackSpeed:b=>a(a=>({...a,playbackSpeed:b})),toggleLoop:()=>a(a=>({...a,loopPlayback:!a.loopPlayback})),setPlaybackPosition:b=>a(a=>({...a,playbackPosition:b}))}),{name:"ProjectStore"}))?r(d):r,Object.assign(c=a=>(function(a,b=a=>a){let c=g.default.useSyncExternalStore(a.subscribe,g.default.useCallback(()=>b(a.getState()),[a,b]),g.default.useCallback(()=>b(a.getInitialState()),[a,b]));return g.default.useDebugValue(c),c})(b,a),b),c),N=(0,f.default)(async()=>{},{loadableGenerated:{modules:[59004]},ssr:!1,loading:()=>(0,e.jsx)("div",{className:"flex h-screen items-center justify-center bg-background",children:(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),(0,e.jsx)("p",{className:"text-text-primary",children:"Loading editor..."})]})})});function O(){let a=(0,h.useRouter)(),[b,c]=(0,g.useState)(null),[d,f]=(0,g.useState)(!0),[j,k]=(0,g.useState)(!1),l=M(a=>a.project);(0,g.useEffect)(()=>{let a=(0,i.createSupabaseBrowserClient)();a.auth.getUser().then(({data:{user:a}})=>{c(a),f(!1)});let{data:{subscription:b}}=a.auth.onAuthStateChange((a,b)=>{c(b?.user??null)});return()=>b.unsubscribe()},[]);let m=(0,g.useCallback)(()=>{b?k(!0):a.push("/login?redirect=/app")},[b,a]),n=(0,g.useCallback)(a=>{k(!1),A.success("Animation saved to cloud!"),console.log("Saved animation ID:",a)},[]),o=(0,g.useCallback)(()=>l?{version:"1.0",name:l.name,sport:l.sport,frames:l.frames,settings:l.settings}:null,[l]);if(d)return(0,e.jsx)("div",{className:"flex h-screen items-center justify-center bg-background",children:(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),(0,e.jsx)("p",{className:"text-text-primary",children:"Loading..."})]})});let p=o();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(N,{isAuthenticated:!!b,onSaveToCloud:m}),j&&p&&(0,e.jsx)(q,{projectName:l?.name||"Untitled Animation",payload:p,onClose:()=>k(!1),onSuccess:n})]})}a.s(["default",()=>O],26336)}];

//# sourceMappingURL=_a273b2ca._.js.map