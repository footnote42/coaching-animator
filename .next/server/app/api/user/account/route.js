"use strict";(()=>{var e={};e.id=36,e.ids=[36],e.modules={2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8539:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>f,patchFetch:()=>g,requestAsyncStorage:()=>p,routeModule:()=>l,serverHooks:()=>x,staticGenerationAsyncStorage:()=>m});var a={};r.r(a),r.d(a,{DELETE:()=>d});var n=r(9303),s=r(8716),o=r(670),i=r(7070),u=r(9692),c=r(9178);async function d(){let e=await (0,c.mk)();if((0,c.f1)(e))return e;let t=await (0,u.j)(),{error:r}=await t.from("user_profiles").delete().eq("id",e.id);return r?(console.error("Database error:",r),i.NextResponse.json({error:{code:"DB_ERROR",message:"Failed to delete account data"}},{status:500})):(await t.auth.signOut(),new i.NextResponse(null,{status:204}))}let l=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/user/account/route",pathname:"/api/user/account",filename:"route",bundlePath:"app/api/user/account/route"},resolvedPagePath:"C:\\Coding Projects\\coaching-animator\\app\\api\\user\\account\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:p,staticGenerationAsyncStorage:m,serverHooks:x}=l,f="/api/user/account/route";function g(){return(0,o.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:m})}},9178:(e,t,r)=>{r.d(t,{Mq:()=>d,PR:()=>s,f1:()=>u,kF:()=>i,mk:()=>o});var a=r(9692),n=r(7070);async function s(){let e=await (0,a.j)(),{data:{user:t}}=await e.auth.getUser();return t}async function o(){return await s()||n.NextResponse.json({error:{code:"UNAUTHORIZED",message:"Authentication required"}},{status:401})}async function i(){let e=await s();if(!e)return n.NextResponse.json({error:{code:"UNAUTHORIZED",message:"Authentication required"}},{status:401});let t=await (0,a.j)(),{data:r}=await t.from("user_profiles").select("role").eq("id",e.id).single();return r?.role!=="admin"?n.NextResponse.json({error:{code:"FORBIDDEN",message:"Admin access required"}},{status:403}):e}function u(e){return e instanceof n.NextResponse}async function c(e){let t=await (0,a.j)(),{data:r}=await t.from("user_profiles").select("banned_at, ban_reason").eq("id",e).single();return r?.banned_at?{banned:!0,reason:r.ban_reason||"Account suspended"}:{banned:!1}}async function d(e){let t=await c(e);return t.banned?n.NextResponse.json({error:{code:"ACCOUNT_BANNED",message:t.reason||"Your account has been suspended"}},{status:403}):null}},9692:(e,t,r)=>{r.d(t,{j:()=>s});var a=r(2728),n=r(1615);async function s(){let e=await (0,n.cookies)();return(0,a.createServerClient)("https://qwivksrxdvrcvuwzmbvr.supabase.co","sb_publishable_J07j1EdYOeUC_tbpoC7AQQ_cjGoXWdP",{cookies:{getAll:()=>e.getAll(),setAll(t){try{t.forEach(({name:t,value:r,options:a})=>e.set(t,r,a))}catch{}}}})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,637,972],()=>r(8539));module.exports=a})();